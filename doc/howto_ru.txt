-----------------------------------------
ОБЩИЕ СВЕДЕНИЯ
-----------------------------------------
1. Соединить arduino с модулем SIM900A V3.0 +, используя Serial1 (учитывать при распиновке что RX1 на arduino - для передачи с нее данных, TX1 -для приема) пины arduino и 5VT,5VR пины модуля SIM900A. Питание и землю для gsm модуля взять с Arduino
2. При необходимости анализа состояния 12В аккумулятора использовать резистивный делительна на 5, подсоединив его выход на AnalogInput0 Arduino.
3. 4ый pin 8765-RX, 5ый pin - TX, соединять с ARDUINO аналогично, RX-RX,TX-TX


-----------------------------------------
Прошивка SIM900A для неазиатских регионов:
-----------------------------------------
Чтобы модуль заработал в нашем регионе, его нужно попросту перепрошить. Этот процесс хорошо описан в блоге нашего соратника Alex-EXE: прошивка «all in one» sim900 Попробую сделать то же самое, но еще более подробно, и с учетом особенностей моего модуля.


Инструменты

Итак, для начала подготовим все необходимые инструменты. Во-первых, непосредственно для прошивки потребуется приложение SIM900 Series download Tools Develop, которое можно легко найти в интернете (https://docs.google.com/file/d/0B-rBpaSGK1gpSWQzMkpjS0dnMzQ/edit).

Во-вторых, пригодится и сам файл прошивки 1137B02SIM900M64_ST_ENHANCE, который тоже легко добывается (я брал тут http://dostmuhammad.com/a-collection-of-firmwares-app-notes-and-guides-for-simcom/).

Наконец, в-третьих, нам нужен будет хороший терминал для экспериментов с модулем. Обычно я использую TeraTerm, но в этот раз его возможностей нехватило (или я не разобрался). Пришлось установить монстра с гениальным названием Terminal. Скачать его можно тут.

Подключение к USB-UART мосту

Теперь подключаем линии RX и TX к мосту. В качестве последнего я использовал CP2102. В моем случае, вопреки логике, RX и TX моста соединялись с RX и TX GSM-модуля симметрично (а не крест-накрест, как принято).

Также следует запитать модуль от стабильного и мощного источника, так как пиковый ток на модуле может достигать 2А (якобы). Подойдут 4 аккумулятора типоразмера AA. Полная схема включения выглядит так:

  	 SIM900
 CP2102 Gnd 	 Gnd
 CP2102 +5V 	 VCC_MCU
 CP2102 RX 	 SIMR
 CP2102  TX 	 SIMT
 Внешний источник +5В 	 VCC5
 Внешний источник Gnd 	 Gnd
  	 RST

У данной модели нет кнопки сброса, так что для прошивки нам потребуется на пару секунд кинуть контакт RST на землю. Для этого мы пока оставим его висеть в воздухе.


Предварительная настройка модуля

Перед тем, как приступить к прошивке, мы соединимся с модулем, и изменим ему скорость UART. Для этого запустим терминал Terminal, выберем правильный порт, и установим скорость обмена - 9600. После этого жмем "Connect".

Всё общение с модулем происходит посредством AT-команд.

Первое что мы скажем модулю будет самая примитивная AT-команда: "AT". Это такой своеобразный ping, на который модуль должен ответить словом "OK".

AT

Если все прошло успешно, и модуль действительно ответил нам "OK", отправляем команду настройки скорости:

AT+IPR=115200

В конце команды должен стоять служебный символ возврата каретки - CR. В ASCII таблице он имеет код 13 (или 0x0D в шестнадцатеричной системе). Символ подставится автоматически, если вы поставите галку "+CR" напротив строки ввода в нашем терминале. В других терминалах тоже есть подобные настройки. 
В ответ на введенную команду снова получим - "OK".
Данная настройка понадобится нам для ускорения процедуры прошивки. В противном случае, как указал в своем блоге Alex-EXE, прошивка займет около часа.

Настройка программы

После того, как все провода воткнуты в нужные места, и модуль подготовлен к прошивке, запускаем приложение SIM900 Series download Tools Develop. Настройка программы состоит всего из нескольких пунктов:

    в поле Target указываем целевой чип. Почему-то у меня не вышло залить прошивку на SIM900A, так что я выбрал "SIM900";
    выбираем правильный порт в поле Port;
    Baud Rate ставим в 115200;
    наконец, указываем файл прошивки в поле Core File (файл с расширением cla).

С настройкой всё.

Прошивка

Теперь выполняем строго и последовательно шесть важных шагов.

    Подключаем к модулю питание (наши 4 аккумулятора). Должна загореться красная лампа питания, а лампа статуса должна начать мигать.
    Подключаем USB-UART к компьютеру.
    Замыкаем провод RST на землю (помним, что все это время он болтался в воздухе).
    Нажимаем в программе кнопку Start Download.
    Считаем в уме до трех, и отрываем RST от земли.
    Ждем 6 минут до завершения прошивки.

Что мы имеем после прошивки

Во-первых, модуль теперь умеет работать с нашими операторами. Во-вторых, мы поставили расширенную прошивку, среди особенностей которой, к примеру, получение координат модуля по сотовым вышкам, работа с электронной почтой и доступ к дополнительным 2.5 Мб памяти.


